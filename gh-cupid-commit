#!/usr/bin/env bash

# Run our context fetcher and store the DNA
REPO_DNA=$(node fetch-context.js)

# Check if it failed
if [ $? -ne 0 ]; then
  exit 1
fi

# Pass the DNA and the user's arguments to the custom Copilot agent
gh copilot suggest -t custom --agent .github/agents/cupid.agent.md "Analyze this Repo DNA and the user request: $REPO_DNA. User Request: $@"